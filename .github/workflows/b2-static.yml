name: Deploy manual (static) to B2 Cloud

on:
  schedule:
    - cron: "0 0 * * 0"
  workflow_dispatch:

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
      with:
        ref: static
        fetch-depth: 1

    - name: Deploy to B2 Cloud
      uses: GamemakerChina/backblaze-b2-action@main
      env:
        SOURCE_DIR: './build'
        B2_BUCKET: ${{ secrets.B2_BUCKET_STATIC }}
        B2_APPKEY_ID: ${{ secrets.B2_APPKEY_ID_STATIC }}
        B2_APPKEY: ${{ secrets.B2_APPKEY_STATIC }}
        B2_SYNC_THREADS: 1